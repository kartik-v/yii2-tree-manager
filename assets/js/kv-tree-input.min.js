/*!
 * @copyright Copyright &copy; Kartik Visweswaran, Krajee.com, 2015
 * @package yii2-tree-manager
 * @version 1.0.4
 *
 * Tree View Input Widget Validation Module.
 *
 * Author: Kartik Visweswaran
 * Copyright: 2015, Kartik Visweswaran, Krajee.com
 * For more JQuery plugins visit http://plugins.krajee.com
 * For more Yii related demos visit http://demos.krajee.com
 */!function(t){"use strict";var e=function(e,n){return null===e||void 0===e||0===e.length||n&&""===t.trim(e)},n=function(e,n){var i=this;i.$element=t(e),i.init(n),i.listen()};n.prototype={constructor:n,init:function(n){var i,r,l,u,a=this,o=[];if(t.each(n,function(t,e){a[t]=e}),a.$tree=t("#"+a.treeId),a.$input=t("#"+a.inputId),a.$dropdown=t("#"+a.dropdownId),e(a.placeholder)&&(a.placeholder="&nbsp;"),e(a.value))return void a.$input.html(a.caret+a.placeholder);for(u=a.value.toString().split(","),i=0;i<u.length;i++)r=a.$tree.find('li[data-key="'+u[i]+'"]'),l=r.find(">.kv-tree-list .kv-node-label").text(),o.push(l);a.setInput(o)},setInput:function(t){var n=this,i="";n.$input.removeClass("has-multi"),e(t)||e(t[0])?i=n.placeholder:1===t.length?i=t[0]:(i='<ul class="kv-tree-input-values"><li>'+t.join("</li><li>")+'</li></ul><div class="clearfix"></div>',n.$input.addClass("has-multi")),n.$input.html(n.caret+i)},listen:function(){var t=this;t.$dropdown.on("click",function(t){t.stopPropagation()}),t.$element.on("treeview.change",function(e,n,i){t.setInput(i.split(",")),t.$input.closest(".kv-tree-dropdown-container").removeClass("open")})}},t.fn.treeinput=function(e){var i,r,l,u=Array.apply(null,arguments);return u.shift(),this.each(function(){i=t(this),r=i.data("treeinput"),l="object"==typeof e&&e,r||(r=new n(this,t.extend({},t.fn.treeinput.defaults,l,t(this).data())),i.data("treeinput",r)),"string"==typeof e&&r[e].apply(r,u)})},t.fn.treeinput.defaults={},t.fn.treeinput.Constructor=n}(window.jQuery);